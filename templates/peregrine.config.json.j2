{
    "grpc": {
        "enabled": {{ validator_peregrine_grpc_enabled | lower }},
        "endpoint": "{{ validator_peregrine_grpc_endpoint }}",
        "api_token": {% if (validator_x_token | default('')) | length > 0 %}"{{ validator_x_token }}"{% else %}null{% endif %},
        "use_tls": {{ validator_peregrine_grpc_use_tls | lower }},
        "connection_timeout": "{{ validator_peregrine_grpc_connection_timeout }}",
        "request_timeout": "{{ validator_peregrine_grpc_request_timeout }}",
        "retry_attempts": {{ validator_peregrine_grpc_retry_attempts }},
        "retry_delay": "{{ validator_peregrine_grpc_retry_delay }}"
    },
    "rpc": {
        "endpoint": "{{ validator_peregrine_rpc_endpoint }}",
        "connection_timeout": "{{ validator_peregrine_rpc_connection_timeout }}",
        "request_timeout": "{{ validator_peregrine_rpc_request_timeout }}",
        "max_connections": {{ validator_peregrine_rpc_max_connections }},
        "max_idle_per_host": {{ validator_peregrine_rpc_max_idle_per_host }},
        "keep_alive_timeout": "{{ validator_peregrine_rpc_keep_alive_timeout }}"
    },
    "api": {
        "bind_address": "{{ (validator_peregrine_api_address.split(':')[:-1] | join(':')) | trim }}",
        "port": {{ (validator_peregrine_api_address.split(':') | last | int) }},
        "max_connections": {{ validator_peregrine_api_max_connections }},
        "request_timeout": "{{ validator_peregrine_api_request_timeout }}"
    },
    "performance": {
        "worker_threads": {{ validator_peregrine_perf_worker_threads }},
        "blocking_threads": {{ validator_peregrine_perf_blocking_threads }},
        "buffer_size": {{ validator_peregrine_perf_buffer_size }},
        "batch_size": {{ validator_peregrine_perf_batch_size }},
        "enable_compression": {{ validator_peregrine_perf_enable_compression | lower }}
    },
    "programs": {% if validator_peregrine_programs is defined and (validator_peregrine_programs | length) > 0 %}{{ validator_peregrine_programs | tojson }}{% else %}[]{% endif %}
}
